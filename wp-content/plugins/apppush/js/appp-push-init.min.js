window.appp_push=(function(c,a,d){var b={};b.initialize=function(){b.bindEvents();};b.bindEvents=function(){a.addEventListener("deviceready",b.onDeviceReady,false);
};b.onDeviceReady=function(){var e=PushWoosh.getHWId();b.receivedEvent("deviceready");var f=apppCore.ajaxurl;if(!f){return;}jQuery.ajax({type:"POST",dataType:"json",url:f,data:{action:"appp_push_device_id",device_id:e,},success:function(g){}});
};b.tokenHandler=function(e){if(!PushWoosh){b.log("No PushWoosh object present");return;}PushWoosh.appCode=apppPushVars.app_code;PushWoosh.register(e,function(f){b.log("PushWoosh register success: "+JSON.stringify(f));
},function(f){b.log("Couldn't register with PushWoosh"+f);});b.log("Token Handler "+e);};b.errorHandler=function(e){b.log("Error Handler  "+e);};b.successHandler=function(e){b.log("Success! Result = "+e);
};b.receivedEvent=function(f){var e=c.plugins.pushNotification;e.unregister(b.successHandler,b.errorHandler);if(device.platform=="android"||device.platform=="Android"){b.log("GCM ID: "+apppPushVars.gcm_id);
e.register(b.successHandler,b.errorHandler,{senderID:apppPushVars.gcm_id,ecb:"appp_push.onNotificationGCM"});}else{e.register(b.tokenHandler,b.errorHandler,{badge:"true",sound:"true",alert:"true",ecb:"appp_push.onNotificationAPN"});
}};b.onNotificationAPN=function(g){var f=c.plugins.pushNotification;if(apppPushVars.notifications_title){var h=apppPushVars.notifications_title;}else{var h="Notification";
}if(g.alert){navigator.notification.alert(g.alert,null,h,"Done");}if(g.badge){f.setApplicationIconBadgeNumber(b.successHandler,g.badge);}if(g.sound){var e=new Media(g.sound);
e.play();}};b.onNotificationGCM=function(g){if(apppPushVars.notifications_title){var f=apppPushVars.notifications_title;}else{var f="Notification";}switch(g.event){case"registered":if(g.regid.length>0){PushWoosh.appCode=apppPushVars.app_code;
PushWoosh.register(g.regid,function(e){b.log("PushWoosh register success: "+JSON.stringify(e));},function(e){b.log("Couldn't register with PushWoosh"+e);
});b.log("Registration id = "+g.regid);}break;case"message":navigator.notification.alert(g.message,null,f,"Done");b.log("msgcnt = "+g.msgcnt);break;case"error":b.log("GCM error = "+g.msg);
break;default:b.log("An unknown GCM event has occurred");break;}};b.log=function(){if(apppCore.log){apppCore.log(arguments);}};b.initialize();return b;
})(window,document);